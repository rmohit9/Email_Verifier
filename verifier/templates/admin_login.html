{% load static %}
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Login - Graphura</title>

    <link
      href="https://fonts.googleapis.com/css2?family=Spline+Sans:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"
    />

    <script src="https://cdn.tailwindcss.com"></script>

    <link rel="stylesheet" href="{% static 'css/admin_login.css' %}" />
  </head>
  <body>
    <div class="shape shape-1"></div>
    <div class="shape shape-2"></div>

    <div class="login-card">
      <div class="text-center mb-10">
        <div class="logo-container">
          <img
            src="{% static 'graphura-circular.png' %}"
            alt="Admin Logo"
            class="floating-logo"
          />
        </div>

        <h1 class="text-3xl font-bold mb-2 header-title">Welcome Back</h1>
        <p class="text-sm header-subtitle">
          Enter your credentials to access the admin panel.
        </p>
      </div>

      <form
        id="loginForm"
        action="{% url 'admin_login' %}"
        method="POST"
        class="space-y-6"
      >
        {% csrf_token %}

        <div class="input-group">
          <input
            type="text"
            id="username"
            name="username"
            class="input-field"
            placeholder="Username or Email"
            required
            autocomplete="username"
          />
          <span class="material-symbols-outlined input-icon">person</span>
        </div>

        <div class="input-group">
          <input
            type="password"
            id="password"
            name="password"
            class="input-field"
            placeholder="Password"
            required
            autocomplete="current-password"
          />
          <span class="material-symbols-outlined input-icon">lock</span>

          <button
            type="button"
            onclick="togglePassword()"
            class="absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-indigo-500 transition-colors"
          >
            <span id="eyeIcon" class="material-symbols-outlined text-lg"
              >visibility</span
            >
          </button>
        </div>

        <div class="flex justify-between items-center text-sm text-slate-400">
          <label
            class="flex items-center gap-2 cursor-pointer hover:text-slate-600 transition-colors"
          >
            <input
              type="checkbox"
              class="rounded border-slate-300 text-indigo-500 focus:ring-0"
            />
            Remember me
          </label>
          <a href="#" class="hover:text-indigo-600 transition-colors"
            >Forgot Password?</a
          >
        </div>

        <button type="submit" class="btn-primary group">
          <span
            >Sign In
            <span class="material-symbols-outlined text-lg align-middle ml-1"
              >arrow_forward</span
            ></span
          >
        </button>
      </form>

      <div class="mt-8 text-center text-xs text-slate-400">
        <p>
          Protected by reCAPTCHA and subject to the Privacy Policy and Terms of
          Service.
        </p>
      </div>
    </div>

    <script>
      function togglePassword() {
        const passwordInput = document.getElementById("password");
        const eyeIcon = document.getElementById("eyeIcon");

        if (passwordInput.type === "password") {
          passwordInput.type = "text";
          eyeIcon.innerText = "visibility_off";
        } else {
          passwordInput.type = "password";
          eyeIcon.innerText = "visibility";
        }
      }

      // Backend simulation (Preserved from your code)
      const form = document.getElementById("loginForm");
      form.addEventListener("submit", function (e) {
        const action = form.getAttribute("action");
        if (!action || action === "#" || action.includes("admin_login")) {
          // Standard Django submission
          // Standard Django submission
          // Check if we are really in a Django environment with working URL
          // Ideally backend handles this.
          // For now, let's assume if it fails or if we are testing locally:
          // e.preventDefault();
          // window.location.href = "{% url 'admin_dashboard' %}"; // or direct path
        }
      });
    </script>
  </body>
</html>
